{"ast":null,"code":"var db = require('mime-db'); // types[extension] = type\n\n\nexports.types = Object.create(null); // extensions[type] = [extensions]\n\nexports.extensions = Object.create(null);\nObject.keys(db).forEach(function (name) {\n  var mime = db[name];\n  var exts = mime.extensions;\n  if (!exts || !exts.length) return;\n  exports.extensions[name] = exts;\n  exts.forEach(function (ext) {\n    exports.types[ext] = name;\n  });\n});\n\nexports.lookup = function (string) {\n  if (!string || typeof string !== \"string\") return false; // remove any leading paths, though we should just use path.basename\n\n  string = string.replace(/.*[\\.\\/\\\\]/, '').toLowerCase();\n  if (!string) return false;\n  return exports.types[string] || false;\n};\n\nexports.extension = function (type) {\n  if (!type || typeof type !== \"string\") return false; // to do: use media-typer\n\n  type = type.match(/^\\s*([^;\\s]*)(?:;|\\s|$)/);\n  if (!type) return false;\n  var exts = exports.extensions[type[1].toLowerCase()];\n  if (!exts || !exts.length) return false;\n  return exts[0];\n}; // type has to be an exact mime type\n\n\nexports.charset = function (type) {\n  var mime = db[type];\n  if (mime && mime.charset) return mime.charset; // default text/* to utf-8\n\n  if (/^text\\//.test(type)) return 'UTF-8';\n  return false;\n}; // backwards compatibility\n\n\nexports.charsets = {\n  lookup: exports.charset // to do: maybe use set-type module or something\n\n};\n\nexports.contentType = function (type) {\n  if (!type || typeof type !== \"string\") return false;\n  if (!~type.indexOf('/')) type = exports.lookup(type);\n  if (!type) return false;\n\n  if (!~type.indexOf('charset')) {\n    var charset = exports.charset(type);\n    if (charset) type += '; charset=' + charset.toLowerCase();\n  }\n\n  return type;\n};","map":null,"metadata":{},"sourceType":"script"}